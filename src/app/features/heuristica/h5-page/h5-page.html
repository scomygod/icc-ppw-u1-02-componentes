<header>
  <header-heuristica
    [numeroHeuristica]="'5'"
    [titulo]="'Prevenci贸n de errores'"
    [concepto]="
      'El dise帽o debe anticipar fallos y reducir su probabilidad, guiando al usuario para que no cometa errores antes de tener que corregirlos.'"
    ></header-heuristica>
    <div class="p-6 max-w-md mx-auto bg-white rounded shadow">
      <h2 class="text-xl mb-4">Transferencia Bancaria</h2>

      <!-- Sin validaciones preventivas -->
      <form (ngSubmit)="transfer()">
        <input
          type="text"
          [(ngModel)]="accountNumber"
          name="account"
          placeholder="N煤mero de cuenta"
          class="w-full p-3 border mb-4">

        <input
          type="text"
          [(ngModel)]="amount"
          name="amount"
          placeholder="Cantidad"
          class="w-full p-3 border mb-4">

        <!-- Sin confirmaci贸n para acci贸n cr铆tica -->
        <button
          type="submit"
          class="w-full bg-red-600 text-white p-3 rounded">
          Transferir Dinero
        </button>
      </form>
    </div>
    <br>

       <div class="p-6 max-w-lg mx-auto bg-white rounded-xl shadow-lg border">
      <div class="flex items-center mb-6">
        <span class="text-2xl mr-3"></span>
        <h2 class="text-xl font-semibold">Transferencia Bancaria</h2>
      </div>

      <form (ngSubmit)="transfer()">
        <!-- Campo cuenta con validaci贸n en tiempo real -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            N煤mero de Cuenta Destino
          </label>
          <input
            type="text"
            [(ngModel)]="accountNumber"
            name="account"
            (input)="validateAccount()"
            placeholder="0000-0000-0000-0000"
            maxlength="19"
            class="w-full p-3 border-2 rounded-lg transition-colors"
            [ngClass]="{
              'border-green-500 bg-green-50': accountValid() === true,
              'border-red-500 bg-red-50': accountValid() === false,
              'border-gray-300': accountValid() === null
            }">

          @if (accountValid() === false) {
            <div class="mt-2 flex items-center text-red-600 text-sm">
              <span class="mr-2">锔</span>
              El n煤mero de cuenta debe tener 16 d铆gitos
            </div>
          }
        </div>

        <!-- Campo monto con validaciones -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Monto a Transferir
          </label>
          <div class="relative">
            <span class="absolute left-3 top-3 text-gray-500">$</span>
            <input
              type="number"
              [(ngModel)]="amount"
              name="amount"
              (input)="validateAmount()"
              placeholder="0.00"
              min="0.01"
              max="10000"
              step="0.01"
              class="w-full p-3 pl-8 border-2 rounded-lg">
          </div>

          @if (amount > 5000) {
            <div class="mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
              <div class="flex items-center text-yellow-800 text-sm">
                <span class="mr-2"></span>
                <strong>Monto Alto:</strong> Requiere confirmaci贸n adicional
              </div>
            </div>
          }
        </div>

        <!-- Bot贸n con protecci贸n -->
        <button
          type="submit"
          [disabled]="!readyToTransfer() || processing()"
          class="w-full p-4 rounded-lg font-semibold transition-all duration-200"
          [ngClass]="{
            'bg-blue-600 hover:bg-blue-700 text-white': readyToTransfer() && !processing(),
            'bg-gray-300 text-gray-500 cursor-not-allowed': !readyToTransfer() || processing()
          }">

          @if (processing()) {
            Procesando...
          } @else {
             Confirmar Transferencia
          }
        </button>
      </form>
    </div>
    </header>
